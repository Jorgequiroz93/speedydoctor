<div class="container mw-100" data-controller="fetch-time">
  <div class="row p-0">
    <%# ####### Left column - doctor ######## %>
    <div class="col-12 col-lg-2 p-4" style="min-width: 160px; background-color: #f9fffe">

      <h3 class="mt-3">Welcome, <%= current_user.prefix %> <b> <%= current_user.first_name %> <%= current_user.last_name %></b></h3>

      <% if current_user.role == 'Doctor' %>
        <h6 class="mt-3 muted">Your patient is <br/><b><%= @patient.prefix %> <%= @patient.first_name %> <%= @patient.last_name %></b></h6>
      <% elsif current_user.role == 'Patient' %>
        <h5 class="mt-3">Your doctor is <br/><b><%= @doctor.prefix %> <%= @doctor.first_name %> <%= @doctor.last_name %></b></h5>
      <% end %>

      <div class="card p-3 text-center mt-5">
        <h5 data-fetch-time-target="timer" class="card-title"> Waiting... </h5>
        <h6 class="card-subtitle mb-2 text-muted"> Billable: <span data-fetch-time-target="bill">00.00</span>$ </h6>
      </div>
    </div>
    <%# ####### Center column ######## %>
    <div class="col-12 col-lg-6 h-100 p-0" style="min-width: 480px; background-color: #f9fffe">
      <div class="card" id="videoframe">
        <%# here will the video chat go %>
      </div>
    </div>
    <%# ####### Right column ######## %>
    <div class="col-12 col-lg-4 bg-tertiary p-4"  style="min-width: 320px; background-color: #f9fffe">
      <% if current_user.role.capitalize == 'Doctor' %>
        <%= render 'doctor_report_form' %>
      <% elsif current_user.role.capitalize == 'Patient' %>
        <%= render 'doctor_report_for_patient' %>
        <%= render 'doctor_review_form' %>
      <% end %>
    </div>
  </div>
</div>

<%# SCRIPTS for the VideoChat %>
<%= render 'video_call_script' %>
